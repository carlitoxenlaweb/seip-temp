{% trans_default_domain 'PequivenSEIPBundle' %}
<style>
    .bodyCenter tbody {
        text-align: center;
    }
</style>
{% if productsReport is not empty %}

    <div class="columns">
        <div class="twelve-columns twelve-columns-mobile">
            <h3 class="thin underline text-center">Graficas</h3>
        </div>
    </div>

    <div class="columns">
        <div class="twelve-columns twelve-columns-mobile">
            <div class="standard-tabs margin-bottom" id="add-tabs">

                <ul class="tabs">
                    <li {% if showDay %} class="" {% else %} class="disabled" {% endif %}><a href="#tab-1">Dia</a></li>
                    <li {% if showMonth %} class="" {% else %} class="disabled" {% endif %}><a href="#tab-2">Mes</a></li>
                    <li {% if showYear %} class="" {% else %} class="disabled" {% endif %}><a href="#tab-3">Año</a></li>
                </ul>

                <div class="tabs-content">

                    <div id="tab-1" class="with-padding">
                        <div class="columns">
                            <div class="twelve-columns"> 
                                <div  ng-controller="ProductionController" ng-init="renderChartColumn3dLinedy('graphicDay',{{ graphicsDays }},'100','500')">
                                    <span id="graphicDay"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="tab-2" class="with-padding">
                        <div class="columns">
                            <div class="twelve-columns"> 
                                <div  ng-controller="ProductionController" ng-init="renderChartColumn3dLinedy('graphicMonth',{{ graphicsMonth }},'100','500')">
                                    <span id="graphicMonth"></span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="tab-3" class="with-padding">
                        <div class="columns">
                            <div class="twelve-columns"> 
                                <div  ng-controller="ProductionController" ng-init="renderChartColumn3dLinedy('graphicsYear',{{ graphicsYear }},'100','500')">
                                    <span id="graphicsYear"></span>
                                </div>
                            </div>
                        </div>
                    </div>


                </div>

            </div>
        </div>
    </div>

    {% if showProduction %}
        <div class="columns">
            <div class="twelve-columns twelve-columns-mobile">
                <h3 class="thin underline text-center">OPERACIÓN</h3>
            </div>
        </div>

        <div class="columns">
            {% if showDay  %}
                <div class="twelve-columns twelve-columns-mobile">
                    <table class="simple-table responsive-table responsive-table-on">
                        <thead>
                            <tr>
                                <th class="header text-center white-gradient" colspan="5">DÍA</th>
                            </tr>
                            <tr>
                                <th scope="col" style="width: 7%" class="header">PRODUCTO</th>
                                <th scope="col" style="width: 7%" class="header">PPTO</th>
                                <th scope="col" style="width: 7%" class=" header">REAL</th>
                                <th scope="col" style="width: 7%" class=" header">EJEC&nbsp;(%)</th>
                                <th scope="col" width="15%" class=" header">VAR</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for productDay in producction["day"] %} 
                                <tr>
                                    <th scope="col" style="width: 7%" class="header">{{ productDay.nameProduct|upper}}</th>
                                    <th scope="col" style="width: 7%" class="header">{{ productDay.plan}}</th>
                                    <th scope="col" style="width: 7%" class=" header">{{ productDay.real}}</th>
                                    <th scope="col" style="width: 7%" class=" header">{{ productDay.ejecution}}</th>
                                    <th scope="col" width="15%" class=" header">{{ productDay.var}}</th>
                                </tr>
                            {% endfor  %}
                        </tbody>
                        <tfoot>
                            <tr>
                                <th class="header">TOTALES</th>
                                    {% for totals in totalProducction["day"] %}    
                                    <th scope="col" style="width: 7%" class=" header">{{ totals }}</th>
                                        {#<th scope="col" style="width: 7%" class="header">{{ totalsDay.plan_total }}</th>
                                        <th scope="col" style="width: 7%" class=" header">{{ totalsDay.real_total }}</th>
                                        <th scope="col" style="width: 7%" class=" header">{{ totalsDay.ejectution_total }}%</th>
                                        <th scope="col" width="15%" class=" header">{{ totalsDay.var }}</th>#}
                                    {% endfor %}
                            </tr>
                        </tfoot>
                    </table>
                </div>




            {% endif %}
            {% if showMonth %}

                <div class="twelve-columns twelve-columns-mobile">
                    <table class="simple-table responsive-table responsive-table-on">
                        <thead>
                            <tr>
                                <th class="header text-center white-gradient" colspan="6">MES</th>
                            </tr>
                            <tr>
                                <th scope="col" style="width: 7%" class="header">PRODUCTO</th>
                                <th scope="col" style="width: 7%" class="header">PPTO-MES</th>
                                <th scope="col" style="width: 7%" class=" header">PPTO-ACUM</th>
                                <th scope="col" style="width: 7%" class=" header">REAL-ACUM</th>
                                <th scope="col" style="width: 7%" class=" header">EJEC&nbsp;(%)</th>
                                <th scope="col" width="15%" class=" header">VAR</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for productDay in producction["month"] %} 
                                <tr>
                                    <th scope="col" style="width: 7%" class="header">{{ productDay.nameProduct|upper }}</th>
                                    <th scope="col" style="width: 7%" class="header">{{ productDay.plan_month}}</th>
                                    <th scope="col" style="width: 7%" class="header">{{ productDay.plan_acumulated}}</th>
                                    <th scope="col" style="width: 7%" class=" header">{{ productDay.real_acumulated}}</th>
                                    <th scope="col" style="width: 7%" class=" header">{{ productDay.ejecution}}</th>
                                    <th scope="col" width="15%" class=" header">{{ productDay.var}}</th>
                                </tr>
                            {% endfor  %}
                        </tbody>
                        <tfoot>
                            <tr>
                                <th class="header">TOTALES</th>
                                    {% for  totals in totalProducction["month"] %}    
                                    <th scope="col" style="width: 7%" class=" header">{{ totals }}</th>
                                        {#<th scope="col" style="width: 7%" class="header">{{ totalsDay.plan_total }}</th>
                                        <th scope="col" style="width: 7%" class=" header">{{ totalsDay.real_total }}</th>
                                        <th scope="col" style="width: 7%" class=" header">{{ totalsDay.ejectution_total }}%</th>
                                        <th scope="col" width="15%" class=" header">{{ totalsDay.var }}</th>#}
                                    {% endfor %}
                            </tr>
                        </tfoot>
                    </table>
                </div>

            {% endif %}
        </div>
        {% if showYear  %}
            <div class="twelve-columns twelve-columns-mobile">
                <table class="simple-table responsive-table responsive-table-on">
                    <thead>
                        <tr>
                            <th class="header text-center white-gradient" colspan="6">AÑO</th>
                        </tr>
                        <tr>
                            <th scope="col" style="width: 7%" class="header">PRODUCTO</th>
                            <th scope="col" style="width: 7%" class="header">PPTO-AÑO</th>
                            <th scope="col" style="width: 7%" class=" header">PPTO-ACUM</th>
                            <th scope="col" style="width: 7%" class=" header">REAL-ACUM</th>
                            <th scope="col" style="width: 7%" class=" header">EJEC&nbsp;(%)</th>
                            <th scope="col" width="15%" class=" header">VAR</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for productDay in producction["year"] %} 
                            <tr>
                                <th scope="col" style="width: 7%" class="header">{{ productDay.nameProduct|upper}}</th>
                                <th scope="col" style="width: 7%" class="header">{{ productDay.plan_year}}</th>
                                <th scope="col" style="width: 7%" class="header">{{ productDay.plan_acumulated}}</th>
                                <th scope="col" style="width: 7%" class=" header">{{ productDay.real_acumulated}}</th>
                                <th scope="col" style="width: 7%" class=" header">{{ productDay.ejecution}}</th>
                                <th scope="col" width="15%" class=" header">{{ productDay.var}}</th>
                            </tr>
                        {% endfor  %}
                    </tbody>
                    <tfoot>
                        <tr>
                            <th class="header">TOTALES</th>
                                {% for  totals in totalProducction["year"] %}    
                                <th scope="col" style="width: 7%" class=" header">{{ totals }}</th>
                                {% endfor %}
                        </tr>
                    </tfoot>
                </table>
            </div>
        {% endif %}
    {% endif %}

    {% if (showRawMaterial or showService ) %}
        <div class="columns">
            <div class="twelve-columns twelve-columns-mobile">
                <h3 class="thin underline text-center">CONSUMOS</h3>
            </div>
        </div>
    {% endif %}

    {% if showRawMaterial %}

        <div class="columns">
            <div class="twelve-columns-mobile">
                <table class="bodyCenter simple-table responsive-table responsive-table-on">
                    <thead>
                        <tr>
                            <th class="header text-center white-gradient" colspan="7">CONSUMO DE MATERIA PRIMA</th>
                        </tr>
                        <tr style="text-align: center;">
                            <th scope="col" style="width: 7%;text-align: left;" class="header">PRODUCTO</th>
                                {%  if showDay %}
                                <th scope="col" colspan="2" style="width: 7%;" class="text-center header">DÍA</th>
                                {% endif %}
                                {%  if showMonth %}
                                <th scope="col" colspan="2" style="width: 7%" class="text-center header">MES</th>
                                {% endif %}
                                {%  if showYear %}
                                <th scope="col" colspan="2" style="width: 7%" class="text-center header">AÑO</th>
                                {% endif %}
                        </tr>
                        <tr style="text-align: center;">
                            <th scope="col" style="width: 7%; text-align: left;" class="header">&nbsp;</th>
                                {%  if showDay %}
                                <th scope="col" style="width: 7%" class="header">PLAN</th>
                                <th scope="col" style="width: 7%" class="header">REAL</th>
                                {% endif %}
                                {%  if showMonth %}
                                <th scope="col" style="width: 7%" class=" header">PLAN</th>
                                <th scope="col" style="width: 7%" class=" header">REAL</th>
                                {% endif %}
                                {%  if showYear %}
                                <th scope="col" style="width: 7%" class=" header">PLAN</th>
                                <th scope="col" style="width: 7%" class=" header">REAL</th>
                                {% endif %}
                        </tr>
                    </thead>
                    <tbody>
                        {% for  rawMaterial in rawMaterials  %}
                            <tr>
                                <th style="text-align: left;" class="header">{{ rawMaterial.productName|upper }}</th>
                                    {%  if showDay %}
                                    <th style="text-align: center;" class="header">{{ rawMaterial.plan }}</th>
                                    <th style="text-align: center;" class="header">{{ rawMaterial.real }}</th>
                                    {% endif %}
                                    {%  if showMonth %}
                                    <th style="text-align: center;" class=" header">{{ rawMaterial.plan_month }}</th>
                                    <th style="text-align: center;" class=" header">{{ rawMaterial.real_month }}</th>
                                    {% endif %}
                                    {%  if showYear %}
                                    <th style="text-align: center;" class=" header">{{ rawMaterial.plan_year }}</th>
                                    <th style="text-align: center;" class=" header">{{ rawMaterial.real_year }}</th>
                                    {% endif %}
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>     
    {% endif %}

    {% if showService %}

        <div class="twelve-columns-mobile">
            <table class="simple-table responsive-table responsive-table-on">
                <thead>
                    <tr>
                        <th class="header text-center white-gradient" colspan="7">CONSUMO DE SERVICIOS</th>
                    </tr>
                    <tr style="text-align: center;">
                        <th scope="col" style="width: 7%; text-align: left;" class="header">PRODUCTO</th>
                            {%  if showDay %}
                            <th scope="col" colspan="2" style="width: 7%" class="text-center header">DÍA</th>
                            {% endif %}
                            {%  if showMonth %}
                            <th scope="col" colspan="2" style="width: 7%" class="text-center header">MES</th>
                            {% endif %}
                            {%  if showYear %}
                            <th scope="col" colspan="2" style="width: 7%" class="text-center header">AÑO</th>
                            {% endif %}
                    </tr>
                    <tr style="text-align: center;">
                        <th scope="col" style="width: 7%; text-align: left;" class="header">&nbsp;</th>
                            {%  if showDay %}
                            <th scope="col" style="width: 7%" class="header">PLAN</th>
                            <th scope="col" style="width: 7%" class="header">REAL</th>
                            {% endif %}
                            {%  if showMonth %}
                            <th scope="col" style="width: 7%" class=" header">PLAN</th>
                            <th scope="col" style="width: 7%" class=" header">REAL</th>
                            {% endif %}
                            {%  if showYear %}
                            <th scope="col" style="width: 7%" class=" header">PLAN</th>
                            <th scope="col" style="width: 7%" class=" header">REAL</th>
                            {% endif %}
                    </tr>
                </thead>
                <tbody>
                    {% for  consumerService in consumerServices %}
                        <tr style="text-align: center;"> 
                            <th style="text-align: left;" class="header" style="text-align: left;">{{ consumerService.productName|upper}} </th>
                                {%  if showDay %}
                                <th style="text-align: center;" class="header">{{ consumerService.plan|myNumberFormat }}</th>
                                <th style="text-align: center;" class="header">{{ consumerService.real|myNumberFormat }}</th>
                                {% endif %}
                                {%  if showMonth %}
                                <th style="text-align: center;" class=" header">{{ consumerService.plan_month|myNumberFormat }}</th>
                                <th style="text-align: center;" class=" header">{{ consumerService.real_month|myNumberFormat }}</th>
                                {% endif %}
                                {%  if showYear %}
                                <th style="text-align: center;" class=" header">{{ consumerService.plan_year|myNumberFormat }}</th>
                                <th style="text-align: center;" class=" header">{{ consumerService.real_year|myNumberFormat }}</th>
                                {% endif %}
                        </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr style="text-align: center;">
                        <th style="text-align: left;">TOTALES</th>
                            {% for totalConsumerService in totalConsumerServices  %}
                            <th style="text-align: center;" >{{ totalConsumerService|myNumberFormat }}</th>
                            {% endfor %}
                    </tr>
                </tfoot>
            </table>
        </div>     
    {% endif %}
</div>
{% if showPnr %}


    <div class="columns">
        <div class="twelve-columns-mobile">
            <table class="simple-table responsive-table responsive-table-on">
                <thead>
                    <tr>
                        <th class="header text-center white-gradient" colspan="5">PRODUCCIÓN NO REALIZADA</th>
                    </tr>
                    <tr>
                        <th scope="col" style="width: 7%" class="header">PRODUCTO</th>
                            {%  if showDay %}
                            <th scope="col" style="width: 7%" class="header">DÍA</th>
                            {% endif %}
                            {%  if showMonth %}
                            <th scope="col" style="width: 7%" class=" header">MES</th>
                            {% endif %}
                            {%  if showYear %}
                            <th scope="col" style="width: 7%" class=" header">AÑO</th>
                            {% endif %}
                    </tr>
                </thead>
                <tbody>

                    {% for unrealizedProduction in unrealizedProductions %}
                        <tr>
                            <th class="header">
                                <a href="{{ path("pequiven_report_template_visualize_pnr_time",{
                                idProduct:unrealizedProduction.idProduct,
                                idReportTemplate: (unrealizedProduction.reportTemplateId),
                                idProductReport: (unrealizedProduction.productId),dateReport: (dateReport|date('d/m/Y'))}) }}">
                                    {{ unrealizedProduction.productName|upper }}
                                </a>

                            </th>
                            {%  if showDay %}
                                <th class="header">{{ unrealizedProduction.day|myNumberFormat }}</th>
                                {% endif %}
                                {%  if showMonth %}
                                <th  class=" header">{{ unrealizedProduction.month|myNumberFormat }}</th>
                                {% endif %}
                                {%  if showYear %}
                                <th  class=" header">{{ unrealizedProduction.year|myNumberFormat }}</th>
                                {% endif %}
                        </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <td>TOTALES</td>
                        {% for totals in totalUnrealizedProduction %}
                            <td>{{ totals|myNumberFormat }}</td>
                        {% endfor %}

                    </tr>
                </tfoot>
            </table>
        </div>
    </div>

{% endif %}
{% if showInventory %}

    <div class="columns">
        <div class="twelve-columns-mobile">
            <table class="simple-table responsive-table responsive-table-on">
                <thead>
                    <tr>
                        <th class="header text-center white-gradient" colspan="5">INVENTARIO</th>
                    </tr>
                    <tr>
                        <th scope="col" style="width: 7%" class="header">PRODUCTO</th>
                            {%  if showDay %}
                            <th scope="col" style="width: 7%" class="header">DÍA</th>
                            {% endif %}
                            {%  if showMonth %}
                            <th scope="col" style="width: 7%" class=" header">DÍA ANTERIOR</th>
                            {% endif %}
                    </tr>
                </thead>
                <tbody>

                    {% for inventory in inventorys  %}
                        <tr>
                            <th  class="header">{{ inventory.productName|upper }}</th>
                                {%  if showDay %}
                                <th  class="header">{{ inventory.day|myNumberFormat }}</th>
                                {% endif %}
                                {%  if showMonth %}
                                <th  class=" header">{{ inventory.day_preview|myNumberFormat }}</th>
                                {% endif %}
                        </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <th>Totales</th>
                            {% for totals in totalInventorys %}
                            <th>{{ totals|myNumberFormat }}</th>
                            {% endfor %}
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>

{% endif %}
{% if showObservation %}
    <div class="columns">
        {% if showDay  %}
            <div class="twelve-columns twelve-columns-mobile">
                <table class="simple-table responsive-table responsive-table-on">
                    <thead>
                        <tr>
                            <th class="header text-center white-gradient" colspan="5">OBSERVACIONES DEL DÍA</th>
                        </tr>
                        <tr>
                            <th scope="col" style="width: 20%" class="header">PRODUCTO</th>
                            <th scope="col" style="width: 80%" class="header">COMENTARIO</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for obs in observations %}
                            <tr>
                                <th scope="col" style="width: 20%" class="header">{{ obs.nameProduct|upper }}</th>
                                <th scope="col" style="width: 80%" class="header">{{ (obs['obs'] is null ? ("pequiven_seip.comment_none"|trans):obs['obs']) |upper }}</th>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% endif %}
    </div>
{% endif %}

<p class="button-height float-right">
    <a id="btnExportToPdf" href="#" class="button">
        <span class="button-icon"><span class="icon-download"></span></span>
            {{ "pequiven_seip.buttons.export_pdf"|trans }}
    </a>
</p>
&nbsp;
{% if is_granted(['ROLE_SEIP_OPERATION_EXPORT_EXCEL_PRODUCTION']) %}
    <p class="button-height float-right">
        <a id="btnExportToExcel" href="#" class="button">
            <span class="button-icon"><span class="icon-download"></span></span>
                {{ "pequiven_seip.buttons.export_xls"|trans }}
        </a>
    </p>
{% endif %}

{% else %}
    <h2 class="text-center">{{ "Select the plant"|trans }}</h2>
{% endif %}
