{% extends 'PequivenSEIPBundle:Template:Developer/Common/formLayoutShow.html.twig' %}

{% trans_default_domain 'PequivenSEIPBundle' %}

{% block before_body %}
    {{ contentHeader(
        ("pequiven_seip.report_template.report_day"|trans )
    ) }}
{% endblock %}

{% block body %}
    {% set hasPermission = is_granted("ROLE_SEIP_DATA_LOAD_CHANGE_DATE") %}
    
    <div class="with-padding">
         <p class="inline-label"><label class="label">{{ "pequiven_seip.date_of_report"|trans }}</label>
             {% if hasPermission %}
                 <a href="{{ path("pequiven_report_template_vizualice",{ dateReport: (dateReport|date_modify("-1 day")|date('d/m/Y'))}) }}" ><i class="fa fa-chevron-left fa-2x"></i></a>&nbsp;
             {% endif %}
             <input type="text" id="dateReport" name="dateReport" class="input" value="{{ dateReport|date('d/m/Y') }}" />&nbsp;
             {% if hasPermission %}
                 <a href="{{ path("pequiven_report_template_vizualice",{ dateReport: (dateReport|date_modify("+1 day")|date('d/m/Y'))}) }}" class="navigate-date"><i class="fa fa-chevron-right fa-2x"></i></a>
             {% endif %}
         </p>
     </div>
     <div class="with-padding">
         <div class="columns">
             <div class="twelve-columns twelve-columns-mobile">
                 <h3 class="thin underline text-center">PRESUPUESTO</h3>
             </div>
         </div>
         {% for plantReport in plantReports %}
             {% set productsReport = plantReport.productsReport %}
             {% set consumerPlanningServices = plantReport.consumerPlanningServices %}
                 <div class="columns">
                     <div class="six-columns twelve-columns-mobile">
                        <table class="simple-table responsive-table responsive-table-on">
                            <thead>
                                <tr>
                                    <th class="header text-center white-gradient" colspan="5">DÍA</th>
                                </tr>
                                <tr>
                                    <th scope="col" style="width: 7%" class="header">PRODUCTO</th>
                                    <th scope="col" style="width: 7%" class="header">PPTO</th>
                                    <th scope="col" style="width: 7%" class=" header">REAL</th>
                                    <th scope="col" style="width: 7%" class=" header">EJEC&nbsp;(%)</th>
                                    <th scope="col" width="15%" class=" header">VAR</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for productReport in productsReport %}
                                    {% set summary = productReport.getSummaryDay(dateReport) %}
                                    <tr>
                                        <th scope="col" style="width: 7%" class="header">{{ productReport.product|upper }}</th>
                                        <th scope="col" style="width: 7%" class="header">{{ summary['plan']|myNumberFormat }}</th>
                                        <th scope="col" style="width: 7%" class=" header">{{ summary['real']|myNumberFormat }}</th>
                                        <th scope="col" style="width: 7%" class=" header">{{ summary['percentage']|myNumberFormat }}</th>
                                        <th scope="col" width="15%" class=" header">{{ summary['pnr']|myNumberFormat }}</th>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                     </div>
                     <div class="six-columns twelve-columns-mobile">
                         <table class="simple-table responsive-table responsive-table-on">
                             <thead>
                                 <tr>
                                     <th class="header text-center white-gradient" colspan="6">MES</th>
                                 </tr>
                                 <tr>
                                     <th scope="col" style="width: 7%" class="header">PPTO-MES</th>
                                     <th scope="col" style="width: 7%" class="header">PPTO-ACUM</th>
                                     <th scope="col" style="width: 7%" class="header">REAL-ACUM</th>
                                     <th scope="col" style="width: 7%" class=" header">EJEC&nbsp;(%)</th>
                                     <th scope="col" style="width: 7%" class=" header">VAR</th>
                                     <th scope="col" width="15%" class=" header">META</th>
                                 </tr>
                             </thead>
                             <tbody>
                                 {% for productReport in productsReport %}
                                     {% set summary = productReport.getSummaryMonth(dateReport) %}
                                     <tr>
                                         <th scope="col" style="width: 7%" class="header">{{ summary['plan_month']|myNumberFormat }}</th>
                                         <th scope="col" style="width: 7%" class="header">{{ summary['plan_acumulated']|myNumberFormat }}</th>
                                         <th scope="col" style="width: 7%" class=" header">{{ summary['real_acumulated']|myNumberFormat }}</th>
                                         <th scope="col" style="width: 7%" class=" header">{{ summary['percentage']|myNumberFormat }}</th>
                                         <th scope="col" style="width: 7%"class=" header">{{ summary['pnr']|myNumberFormat }}</th>
                                         <th scope="col" style="width: 7%" class=" header">TODO</th>
                                     </tr>
                                 {% endfor %}
                             </tbody>
                         </table>
                     </div>
                 </div>
                 <div class="columns">
                     <div class="six-columns twelve-columns-mobile">
                         <table class="simple-table responsive-table responsive-table-on">
                             <thead>
                                 <tr>
                                     <th class="header text-center white-gradient" colspan="7">AÑO</th>
                                 </tr>
                                 <tr>
                                     <th scope="col" style="width: 7%" class="header">PPTO-AÑO</th>
                                     <th scope="col" style="width: 7%" class="header">PPTO-ACUM</th>
                                     <th scope="col" style="width: 7%" class="header">REAL-ACUM</th>
                                     <th scope="col" style="width: 7%" class=" header">EJEC&nbsp;(%)</th>
                                     <th scope="col" style="width: 7%" class=" header">VAR</th>
                                     <th scope="col" style="width: 7%" class=" header">META</th>
                                     <th scope="col" style="width: 7%" class=" header">PROM</th>
                                 </tr>
                             </thead>
                             <tbody>
                                 {% for productReport in productsReport %}
                                     {% set summary = productReport.getSummaryYear(dateReport) %}
                                     <tr>
                                         <th scope="col" style="width: 7%" class="header">{{ summary['plan_year']|myNumberFormat }}</th>
                                         <th scope="col" style="width: 7%" class="header">{{ summary['plan_acumulated']|myNumberFormat }}</th>
                                         <th scope="col" style="width: 7%" class=" header">{{ summary['real_acumulated']|myNumberFormat }}</th>
                                         <th scope="col" style="width: 7%" class=" header">{{ summary['percentage']|myNumberFormat }}</th>
                                         <th scope="col" style="width: 7%"class=" header">{{ summary['pnr']|myNumberFormat }}</th>
                                         <th scope="col" style="width: 7%" class=" header">TODO</th>
                                         <th scope="col" style="width: 7%" class=" header">TODO</th>
                                     </tr>
                                 {% endfor %}
                             </tbody>
                         </table>
                     </div>
                 </div>
                 <div class="columns">
                     <div class="twelve-columns twelve-columns-mobile">
                         <h3 class="thin underline text-center">CONSUMOS</h3>
                     </div>
                 </div>
                 <div class="columns">
                     <div class="twelve-columns-mobile">
                         <table class="simple-table responsive-table responsive-table-on">
                            <thead>
                                <tr>
                                    <th class="header text-center white-gradient" colspan="5">DÍA</th>
                                </tr>
                                <tr>
                                    <th scope="col" style="width: 7%" class="header">PRODUCTO</th>
                                    <th scope="col" style="width: 7%" class="header">DÍA</th>
                                    <th scope="col" style="width: 7%" class=" header">MES</th>
                                    <th scope="col" style="width: 7%" class=" header">AÑO</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for consumerPlanningService in consumerPlanningServices %}
                                    {% set summary = consumerPlanningService.getSummary(dateReport) %}
                                    <tr>
                                        <th scope="col" style="width: 7%" class="header">{{ consumerPlanningService.service|upper }}</th>
                                        <th scope="col" style="width: 7%" class="header">{{ summary['total_day']|myNumberFormat }}</th>
                                        <th scope="col" style="width: 7%" class=" header">{{ summary['total_month']|myNumberFormat }}</th>
                                        <th scope="col" style="width: 7%" class=" header">{{ summary['total_year']|myNumberFormat }}</th>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                     </div>
                 </div>
         {% endfor %}
     </div>
             
{% endblock body %}