{% trans_default_domain 'PequivenSEIPBundle' %}
<!-- Sección de las Líneas Estratégicas -->
<div class="row-fluid">
    <div class="navbar">
        <div class="navbar-inner">
            <div class="container">
                <div class="span9" style="margin-left: 0;">
                    <ul class="nav">
                        {% for lineStrategic in linesStrategics %}
                            <li {% if lineStrategic.id == idLineStrategic %} class="linestrategic-active" {% endif %} style="display: table-cell; float: none;">
                                <a href="{{ path('pequiven_line_strategic_show',{id:lineStrategic.id}) }}" data-toggle="tab">
                                    <span title="{{ lineStrategic.description }}">
                                        <img style="padding: 20px;" class="snapshot-box-icon-header" src="{{ asset(iconsLineStrategic[lineStrategic.level]) }}">
                                    </span>
                                </a>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<hr class="hr-linestrategic-icons" />

<!-- Sección Lateral Izquierda -->
<div class="with-padding">
    <div class="columns">
        <div class="three-columns three-columns-tablet six-columns-mobile new-row-mobile" style="overflow-y: scroll; height: 450px;">
            <div class="with-padding">
                <div class="columns">
                    {% for indicatorGroup in indicatorsGroup %}
                        <div class="twelve-columns twelve-columns-tablet twelve-columns-mobile new-row-mobile {% if indicatorGroup.id == indicator.id %} linestrategic-active {% endif %}" style="display: inline-block;" ng-controller="DashboardController" ng-init="{% if indicatorGroup.evaluateInPeriod == true %} renderChartAngularGauge('{{ indicatorGroup.ref }}',{{ dataWidget[indicatorGroup.ref]|json_encode() }},'100%','100px') {% else %} renderWidgetIndicatorStrategic('{{ indicatorGroup.ref }}',{{ dataWidget[indicatorGroup.ref]|json_encode() }},'100%','100px') {% endif %}">
                            <a {% if indicatorGroup.id == indicator.id %} name="cargarInd" {% endif %} target="_blank" href="{{ path('pequiven_indicator_show',{id:indicatorGroup.id}) }}">
                                <span title="{{ indicatorGroup.description }}">
                                    <p style="text-align: center;margin-bottom: -2px;"><b>{{ indicatorGroup.summary }}</b></p>
                                </span>
                            </a>
                            <span id="{{ indicatorGroup.ref }}"></span>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <div class="nine-columns nine-columns-tablet six-columns-mobile new-row-mobile">

            {{ indicatorService.getArrowOfIndicator(indicator)|raw }}

            {% if indicator.showCharts %}{# En caso de que sólo se necesite ver el gráfico #}
                <div ng-controller="ChartsDashboardController" >
                    {% set Charts = indicator.getCharts %}
                    <div class="standard-tabs margin-bottom" {#style="height: 600px;"#}>
                        <ul class="tabs">
                            {% set cont = 1 %}
                            {% for chart in Charts %}
                                {% set grafico = "grafico"~loop.index %}
                                <li {% if cont == 1 %} class="active" {% endif %}>
                                    <a style="color: #000000;" href="#tab-{{ grafico }}">{{ chart.shortDescription }} </a>
                                </li>
                                {% set cont = cont + 1 %}
                            {% endfor %}
                        </ul>
                        <div class="tabs-content" {#style="min-height: 500px;"#}>
                            {% for chart in Charts %}
                                {% set grafico = "grafico"~loop.index %}
                                {% if  chart.typeOfChart == constant('Pequiven\\SEIPBundle\\Entity\\Chart::TYPE_CHART_INDICATORS_ASSOCIATED_DOUGHNUT') %}
                                    <div id="tab-{{ grafico }}"  ng-controller="DashboardController" ng-init="chargeChartDoughnut2dIndicatorsAssociated({{ indicator.id }},'{{ grafico }}','100','500')">
                                        <span id="{{ grafico }}"></span>
                                    </div>
                                    {#<div id="tab-{{ chart.typeOfChart }}" ng-init="chargeChartDoughnut2d({{ indicator.id }})" fusioncharts
                                         width="100%"
                                         height="400"
                                         type="{{ chart.alias }}"
                                         dataFormat= "json"
                                         dataSource="{$chartDoughnut2d$}" >
                                    </div>#}
                                {% endif %}
                                {% if chart.typeOfChart == constant('Pequiven\\SEIPBundle\\Entity\\Chart::TYPE_CHART_COLUMN_REAL_PLAN_INDICATORS_ASSOCIATED')  %}
                                    <div id="tab-{{ grafico }}"  ng-controller="DashboardController" ng-init="chargeChartColumnLineDualAxisIndicatorsAssociated({{ indicator.id }},'{{ grafico }}','100','500')">
                                        <span id="{{ grafico }}"></span>
                                    </div>
                                {% endif %}
                                {% if chart.typeOfChart == constant('Pequiven\\SEIPBundle\\Entity\\Chart::TYPE_CHART_VARIABLES_REAL_PLAN_DOUGHNUT')  %}
                                    <div id="tab-{{ grafico }}"  ng-controller="DashboardController" ng-init="chargeChartDoughnut2dWithVariablesRealPlan({{ indicator.id }},'{{ grafico }}','100','500')">
                                        <span id="{{ grafico }}"></span>
                                    </div>
                                {% endif %}
                                {% if chart.typeOfChart == constant('Pequiven\\SEIPBundle\\Entity\\Chart::TYPE_CHART_PIE_VARIABLES_MARKED_REAL')  %}
                                    <div id="tab-{{ grafico }}"  ng-controller="DashboardController" ng-init="chargeChartPieVariablesMarkedReal({{ indicator.id }},'{{ grafico }}','100','500')">
                                        <span id="{{ grafico }}"></span>
                                    </div>
                                {% endif %}
                                {% if chart.typeOfChart == constant('Pequiven\\SEIPBundle\\Entity\\Chart::TYPE_CHART_COLUMN_VARIABLES_REAL_PLAN')  %}
                                    <div id="tab-{{ grafico }}"  ng-controller="DashboardController" ng-init="chargeChartColumnLineDualAxisRealPlan({{ indicator.id }},'{{ grafico }}','100','500')">
                                        <span id="{{ grafico }}"></span>
                                    </div>
                                {% endif %}
                                {% if chart.typeOfChart == constant('Pequiven\\SEIPBundle\\Entity\\Chart::TYPE_CHART_PIE_VARIABLES_MARKED_PLAN')  %}
                                    <div id="tab-{{ grafico }}"  ng-controller="DashboardController" ng-init="chargeChartPieVariablesMarkedPlan({{ indicator.id }},'{{ grafico }}','100','500')">
                                        <span id="{{ grafico }}"></span>
                                    </div>
                                {% endif %}
                                {% if chart.typeOfChart == constant('Pequiven\\SEIPBundle\\Entity\\Chart::TYPE_CHART_BARS_AREA_VARIABLES_REAL_PLAN_BY_FREQUENCY_NOTIFICATION')  %}
                                    <div id="tab-{{ grafico }}"  ng-controller="DashboardController" ng-init="chargeChartBarsAreaVariablesRealPlanByFrequencyNotification({{ indicator.id }},'{{ grafico }}','100','500')">
                                        <span id="{{ grafico }}"></span>
                                    </div>
                                {% endif %}
                                {% if chart.typeOfChart == constant('Pequiven\\SEIPBundle\\Entity\\Chart::TYPE_CHART_PIE_VARIABLES_PLAN_FROM_EQUATION')  %}
                                    <div id="tab-{{ grafico }}"  ng-controller="DashboardController" ng-init="chargeChartPieVariablesPlanFromEquation({{ indicator.id }},'{{ grafico }}','100','500')">
                                        <span id="{{ grafico }}"></span>
                                    </div>
                                {% endif %}
                                {% if chart.typeOfChart == constant('Pequiven\\SEIPBundle\\Entity\\Chart::TYPE_CHART_PIE_VARIABLES_REAL_FROM_EQUATION')  %}
                                    <div id="tab-{{ grafico }}"  ng-controller="DashboardController" ng-init="chargeChartPieVariablesRealFromEquation({{ indicator.id }},'{{ grafico }}','100','500')">
                                        <span id="{{ grafico }}"></span>
                                    </div>
                                {% endif %}
                                {% if chart.typeOfChart == constant('Pequiven\\SEIPBundle\\Entity\\Chart::TYPE_CHART_COLUMN_REAL_PLAN_BY_FREQUENCY_NOTIFICATION')  %}
                                    <div id="tab-{{ grafico }}"  ng-controller="DashboardController" ng-init="chargeChartColumnLineDualAxisByFrequencyNotification({{ indicator.id }},'{{ grafico }}','100','500')">
                                        <span id="{{ grafico }}"></span>
                                    </div>
                                {% endif %}
                                {% if chart.typeOfChart == constant('Pequiven\\SEIPBundle\\Entity\\Chart::TYPE_CHART_BARS_AREA_VARIABLES_MARKED_REAL_PLAN_BY_FREQUENCY_NOTIFICATION')  %}
                                    <div id="tab-{{ grafico }}"  ng-controller="DashboardController" ng-init="chargeChartBarsAreaVariablesMarkedRealPlanByFrequencyNotification({{ indicator.id }},'{{ grafico }}','100','500')">
                                        <span id="{{ grafico }}"></span>
                                    </div>
                                {% endif %}
                            {% endfor %}
                        </div>

                    </div>
                </div>
            {% endif %}
            {% if indicator.showTags %}
                {% if indicator.tagsIndicator|length > 0 %}
                    <fieldset class="fieldset">
                        <legend class="legend">{{ ('pequiven_indicator.tagIndicators'|trans({},'PequivenIndicatorBundle')) }}&nbsp;</legend>
                        {% include 'PequivenIndicatorBundle:Common:tagIndicators.html.twig' %}
                    </fieldset>
                {% else %}
                    <span class="tag red-bg with-tooltip">{{ ('pequiven_indicator.empty'|trans({},'PequivenIndicatorBundle')) }}</span>
                {% endif %}
            {% endif %}
        </div>
    </div>
</div>

{% block javascript %}
    <script type="text/javascript">
        var show = true;
        function showDetail() {
            if (show == true) {//Ver Detalle
                $("#chartColumn").hide();
                $("#chartDetail").show();
                $("#textDetail").text("Ver Global");
                show = false;
            } else {//Ver Global
                $("#chartColumn").show();
                $("#chartDetail").hide();
                $("#textDetail").text("Ver Detalle");
                show = true;
            }
        }

        $(document).ready(function () {
            $("#chartDetail").hide();
        });
    </script>
{% endblock javascript %}
