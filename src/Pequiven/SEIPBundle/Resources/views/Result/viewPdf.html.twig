{% trans_default_domain 'PequivenSEIPBundle' %}

{% block body %}
    {#{{ contentHeader(
        (entity)
    ) }}#}
    
    <div class="inline-label">
        <ul style="padding-left: 0;margin-left: 2.14285714em;list-style-type: none;">
            {% set limitTruncate = 100 %}
            {% for t in tree %}
                <li>
                        {% set p = t['parent'] %}
                        {% set avancedUsed = p.getResult %}
                        {% set images = images %}
                        {% set avancedUsedText = avancedUsed %}
                            {% include 'PequivenSEIPBundle:Result:percentajeResult.html.twig' %}
                        
                        {% set parentSummary = resultService.getResultChildresObjetives(p,t['child']) %}
                        ({{ ((parentSummary['myContributionWithWeight'] ? parentSummary['myContributionWithWeight'] : '0')|number_format(2)) | str_pad(5,'0') }}% / {{ ((parentSummary['myDutyWithWeight'] ? parentSummary['myDutyWithWeight'] : '0')|number_format(2)) | str_pad(5,'0') }}%) - 
                        
                    OE {{ generateLink(p,null,{truncate:limitTruncate})|striptags|raw }}
                    <ul style="padding-left: 0;margin-left: 2.14285714em;list-style-type: none;">
                    {% for chlid in t['child'] %}
                        <li>
                            {% set avancedUsed = chlid.getResult %}
                            {% set avancedUsedText = avancedUsed %}
                                {% include 'PequivenSEIPBundle:Result:percentajeResult.html.twig' %}
                                OT {{ generateLink(chlid,null,{truncate:limitTruncate})|striptags|raw }}
                            
                                <ul style="padding-left: 0;
                                margin-left: 2.14285714em;
                                list-style-type: none;">
                                {% for ch in chlid.childrens %}
                                    {% if ch.getDeletedAt is null %}
                                        <li>
                                            {% set avancedUsed = ch.getResult %}
                                            {% set avancedUsedText = avancedUsed %}
                                                {% include 'PequivenSEIPBundle:Result:percentajeResult.html.twig' %}
                                            OO {{ generateLink(ch,null,{truncate:limitTruncate})|striptags|raw }}
                                        </li>
                                    {% endif %}
                                {% endfor %}
                                </ul>
                            
                        </li>
                    {% endfor %}
                    </ul>
                </li>
            {% endfor %}
        </ul>
    </div>
{% endblock body %}
